seq = sel @ x4
part = rhook @ sbeat join
pulseA = part 4 x1008
pulseB = part 4 xff00
pulse = kick (perbeat 4) * sbeats 16 (seq |pulseA pulseB)
hitA = part 4 x8421
hitB = part 4 x84f1
hit = noise * max 0 (saw (perbeat 4)) * sbeats 16 (seq |hitA hitB)
hhA = part 8 xd5555755
hhB = part 8 x000055ff
hh = pan (sin 100) (0.3 noise * max 0 (saw (perbeat 8)) * sbeats 16 (seq |hhA hhB))
bass = time > beats 32
notes = 0.5 sin [|(bass C2) C3 Eb4 G |(bass Eb2) Eb3 G4 Bb |(bass G2) G3 D4 B |(bass D2) D3 F4 Ab]
offset_notes = rhook @ pan (flip @ sec notes (beats 4))
melody = offset_notes -1 0 + offset_notes 1 0.007
melody + (pulse + hit + hh) * sbeats 16 xef
